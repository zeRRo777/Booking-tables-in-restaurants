# API для приложения по бронированию столиков в ресторане

## Описание

Это RESTful API для комплексной системы бронирования столиков в ресторанах. Проект представляет собой бэкэнд-часть приложения, которая позволяет управлять ресторанами, сетями ресторанов, бронированиями, пользователями и их ролями.

Система разработана для взаимодействия с различными категориями пользователей:
- **Клиенты**: могут регистрироваться, искать рестораны, бронировать столики и оставлять отзывы.
- **Администраторы ресторанов**: управляют информацией о своем ресторане, его расписанием, столиками, бронированиями и персоналом.
- **Администраторы сетей ресторанов**: управляют несколькими ресторанами в рамках одной сети.
- **Супер-администраторы**: имеют полный доступ ко всем ресурсам системы для глобального управления.

Проект решает задачи автоматизации процесса бронирования, управления загруженностью ресторанов, сбора обратной связи от клиентов и предоставления статистики для анализа эффективности работы заведений.

## Функционал

### 1. Аутентификация и Авторизация
- Регистрация новых пользователей.
- Аутентификация по email и паролю с использованием JWT.
- Выход из системы (Logout).
- Восстановление пароля через email.
- Безопасная смена email, пароля и номера телефона с подтверждением.
- Верификация email и номера телефона.
- Разграничение прав доступа на основе ролей (Супер-админ, Админ сети, Админ ресторана, Пользователь).

### 2. Управление пользователями и ролями
- **Для администраторов:**
  - Полный CRUD (создание, чтение, обновление, удаление) пользователей.
  - Просмотр списка пользователей с фильтрацией и пагинацией.
  - Назначение и удаление ролей для пользователей.
- **Для пользователей:**
  - Просмотр и редактирование собственного профиля.
  - Удаление своего аккаунта.

### 3. Управление сетями ресторанов
- CRUD операции для сетей ресторанов (доступно Супер-админу).
- Назначение администраторов для сетей ресторанов.
- Просмотр списка сетей с фильтрацией и сортировкой.

### 4. Управление ресторанами
- CRUD операции для ресторанов.
- Привязка ресторана к сети.
- Управление статусом ресторана (например, "Открыт", "Закрыт на ремонт").
- Настройка основного и дополнительного расписания работы.
- Управление администраторами конкретного ресторана.
- Ведение черного списка пользователей для ресторана.
- Получение статистики по загруженности (почасовая, дневная, месячная, годовая).

### 5. Управление столиками и бронированием
- CRUD операции для столиков в ресторане с указанием вместимости.
- Создание, просмотр, обновление и отмена бронирования.
- Проверка доступности столиков на определенную дату и время.
- Просмотр списка своих бронирований для пользователя.
- Просмотр и управление всеми бронированиями для администратора ресторана.
- Управление статусами бронирования (например, "Подтверждено", "Отменено", "Гость пришел").

### 6. Отзывы и рейтинги
- Пользователи могут оставлять отзывы и ставить рейтинг ресторанам, в которых у них было бронирование.
- Просмотр списка отзывов для конкретного ресторана.
- Пользователи могут редактировать и удалять свои отзывы.

### 7. Система уведомлений
- CRUD для типов напоминаний о предстоящем бронировании (например, "за 1 час", "за 24 часа").
- Автоматическая отправка напоминаний о предстоящих бронированиях.

## Технологии
- **Фреймворк:** Laravel 12
- **База данных:** PostgreSQL
- **Кэширование и очереди:** Redis
- **Окружение для разработки:** Docker, Laravel Sail
- **Документация API:** Swagger (OpenAPI)
- **Аутентификация:** JWT (JSON Web Tokens)

## Требования
Для запуска проекта на локальной машине вам понадобится:
- Docker
- Docker Compose

## Установка и запуск

1.  **Клонируйте репозиторий:**
    ```bash
    git clone <адрес_вашего_репозитория>
    cd <название_папки_проекта>
    ```

2.  **Создайте файл окружения:**
    Скопируйте файл `.env.example` в новый файл `.env`.
    ```bash
    cp .env.example .env
    ```
    *В файле `.env` уже настроены все необходимые переменные для работы с Laravel Sail.*

3.  **Установите зависимости и запустите контейнеры:**
    Laravel Sail — это интерфейс командной строки для взаимодействия со средой Docker. Команда `sail up` соберет и запустит все необходимые контейнеры (приложение, базу данных, Redis и т.д.).
    ```bash
    ./vendor/bin/sail up -d
    ```
    *Первый запуск может занять некоторое время.*

4.  **Установите Composer зависимости:**
    Выполните команду `composer install` внутри контейнера вашего приложения.
    ```bash
    ./vendor/bin/sail composer install
    ```

5.  **Сгенерируйте ключ приложения:**
    ```bash
    ./vendor/bin/sail artisan key:generate
    ```

6.  **Выполните миграции базы данных:**
    Эта команда создаст все необходимые таблицы в базе данных PostgreSQL.
    ```bash
    ./vendor/bin/sail artisan migrate
    ```

7.  **(Опционально) Заполните базу данных тестовыми данными:**
    Если у вас есть сидеры (seeders) для начального заполнения данных (например, ролей, статусов).
    ```bash
    ./vendor/bin/sail artisan db:seed
    ```

8.  **Проект готов к работе!**
    Приложение будет доступно по адресу: `http://localhost`.

### Полезные команды Sail
- **Запустить контейнеры в фоновом режиме:** `./vendor/bin/sail up -d`
- **Остановить контейнеры:** `./vendor/bin/sail down`
- **Выполнить любую artisan команду:** `./vendor/bin/sail artisan <команда>`
- **Открыть bash-терминал внутри контейнера приложения:** `./vendor/bin/sail shell`
